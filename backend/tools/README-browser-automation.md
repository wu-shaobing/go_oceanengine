# ğŸ¤– æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ä½¿ç”¨æŒ‡å—

## ğŸ“¦ å®‰è£… Playwright

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```bash
# æ–¹å¼ä¸€: å®‰è£…åˆ°å½“å‰é¡¹ç›®
npm install --save-dev playwright

# æ–¹å¼äºŒ: å…¨å±€å®‰è£… (æ¨è)
npm install -g playwright

# å®‰è£…æµè§ˆå™¨ (å¿…éœ€)
npx playwright install chromium
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. è¿è¡ŒåŠè‡ªåŠ¨ç™»å½•è„šæœ¬

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
node tools/browser-login.js
```

### 2. æ“ä½œæµç¨‹

1. **è„šæœ¬è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨**
   - Chrome æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€
   - è‡ªåŠ¨è®¿é—® http://cl.mobgi.com/login

2. **æ‚¨æ‰‹åŠ¨ç™»å½•**
   - åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è´¦å·: `11489573@qq.com`
   - è¾“å…¥å¯†ç : `Aa123456`
   - ç‚¹å‡»ç™»å½•æŒ‰é’®
   - å¦‚éœ€ä¿®æ”¹å¯†ç ï¼ŒæŒ‰æç¤ºä¿®æ”¹

3. **æŒ‰ Enter ç»§ç»­**
   - ç™»å½•å®Œæˆåï¼Œå›åˆ°ç»ˆç«¯
   - æŒ‰ `Enter` é”®ç»§ç»­

4. **è„šæœ¬è‡ªåŠ¨æå–ä¿¡æ¯**
   - è‡ªåŠ¨æˆªå›¾
   - æå–é¡µé¢æ–‡æœ¬
   - åˆ†æé¡µé¢ç»“æ„
   - ä¿å­˜ HTML æ–‡ä»¶

### 3. è¾“å‡ºæ–‡ä»¶

è„šæœ¬ä¼šåœ¨ `tools/` ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶:

```
tools/
â”œâ”€â”€ dashboard-screenshot.png  # å®Œæ•´é¡µé¢æˆªå›¾
â””â”€â”€ dashboard-page.html       # å®Œæ•´é¡µé¢HTML
```

## ğŸ“‹ è„šæœ¬åŠŸèƒ½

### âœ… å·²å®ç°åŠŸèƒ½

1. **è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨** - ä½¿ç”¨ Chromium
2. **è®¿é—®ç™»å½•é¡µé¢** - è‡ªåŠ¨å¯¼èˆªåˆ°ç™»å½•URL
3. **ç­‰å¾…æ‰‹åŠ¨ç™»å½•** - æ‚¨å®Œå…¨æ§åˆ¶ç™»å½•è¿‡ç¨‹
4. **å…¨é¡µé¢æˆªå›¾** - ä¿å­˜é«˜è´¨é‡æˆªå›¾
5. **æå–é¡µé¢æ–‡æœ¬** - è·å–æ‰€æœ‰å¯è§æ–‡æœ¬
6. **åˆ†æé¡µé¢ç»“æ„**:
   - æå–æ‰€æœ‰æ ‡é¢˜ (H1-H6)
   - æå–æ‰€æœ‰é“¾æ¥ (å‰20ä¸ª)
   - æå–æ‰€æœ‰æŒ‰é’®
   - æå–è¡¨æ ¼æ•°æ® (å‰5ä¸ª)
7. **ä¿å­˜å®Œæ•´HTML** - ä¾›åç»­åˆ†æ

### ğŸ“Š è¾“å‡ºä¿¡æ¯

è„šæœ¬ä¼šåœ¨ç»ˆç«¯æ˜¾ç¤º:

```
ğŸ“ é¡µé¢ä¿¡æ¯:
   - é¡µé¢æ ‡é¢˜
   - å½“å‰URL

ğŸ“‹ é¡µé¢æ–‡æœ¬å†…å®¹:
   - å®Œæ•´çš„æ–‡æœ¬å†…å®¹

ğŸ” é¡µé¢ç»“æ„åˆ†æ:
   - æ‰€æœ‰æ ‡é¢˜
   - ä¸»è¦é“¾æ¥ (å‰20ä¸ª)
   - æ‰€æœ‰æŒ‰é’®
   - è¡¨æ ¼æ•°æ® (å‰5ä¸ªè¡¨æ ¼)
```

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰æˆªå›¾åŒºåŸŸ

ç¼–è¾‘ `tools/browser-login.js`ï¼Œæ‰¾åˆ°æˆªå›¾éƒ¨åˆ†:

```javascript
// æˆªå–ç‰¹å®šå…ƒç´ 
await page.locator('#dashboard').screenshot({ path: 'element.png' });

// æˆªå–è§†å£å†…å®¹ (ä¸æ»šåŠ¨)
await page.screenshot({ 
  path: 'viewport.png',
  fullPage: false 
});
```

### æå–ç‰¹å®šæ•°æ®

åœ¨è„šæœ¬ä¸­æ·»åŠ è‡ªå®šä¹‰æå–é€»è¾‘:

```javascript
// æå–ç‰¹å®šçš„æ•°æ®
const customData = await page.evaluate(() => {
  // åœ¨æµè§ˆå™¨ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ
  return {
    username: document.querySelector('.username')?.innerText,
    balance: document.querySelector('.balance')?.innerText,
    // ... å…¶ä»–æ•°æ®
  };
});

console.log('è‡ªå®šä¹‰æ•°æ®:', customData);
```

### è‡ªåŠ¨åŒ–å¯¼èˆª

```javascript
// ç‚¹å‡»èœå•é¡¹
await page.click('text=æ•°æ®æŠ¥è¡¨');
await page.waitForLoadState('networkidle');

// å¡«å†™è¡¨å•
await page.fill('#search-input', 'æœç´¢å…³é”®è¯');
await page.click('#search-button');
```

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1: Playwright æœªå®‰è£…

**é”™è¯¯ä¿¡æ¯**:
```
Error: Cannot find module 'playwright'
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
npm install playwright
npx playwright install chromium
```

### é—®é¢˜ 2: æµè§ˆå™¨å¯åŠ¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```
browserType.launch: Executable doesn't exist
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£…æµè§ˆå™¨
npx playwright install chromium

# æˆ–è€…å®‰è£…æ‰€æœ‰æµè§ˆå™¨
npx playwright install
```

### é—®é¢˜ 3: é¡µé¢åŠ è½½è¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**:
ç¼–è¾‘è„šæœ¬ï¼Œå¢åŠ è¶…æ—¶æ—¶é—´:

```javascript
await page.goto('http://cl.mobgi.com/login', {
  waitUntil: 'networkidle',
  timeout: 60000  // å¢åŠ åˆ° 60 ç§’
});
```

### é—®é¢˜ 4: æƒé™é—®é¢˜ (MacOS)

å¦‚æœé‡åˆ°æƒé™æç¤ºï¼Œè¯·åœ¨ **ç³»ç»Ÿåå¥½è®¾ç½® â†’ å®‰å…¨æ€§ä¸éšç§** ä¸­å…è®¸ã€‚

## ğŸ“š Playwright æ–‡æ¡£

- å®˜æ–¹æ–‡æ¡£: https://playwright.dev/
- API æ–‡æ¡£: https://playwright.dev/docs/api/class-playwright
- ä¸­æ–‡æ–‡æ¡£: https://playwright.bootcss.com/

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **è¿è¡Œè„šæœ¬**: `node tools/browser-login.js`
2. **æŸ¥çœ‹æˆªå›¾**: `tools/dashboard-screenshot.png`
3. **æŸ¥çœ‹ HTML**: `tools/dashboard-page.html`
4. **åˆ†ææ•°æ®**: æ ¹æ®ç»ˆç«¯è¾“å‡ºçš„ä¿¡æ¯è¿›è¡Œåˆ†æ

## âš ï¸ å®‰å…¨æé†’

- âœ… è„šæœ¬ä¸ä¼šä¿å­˜æ‚¨çš„è´¦å·å¯†ç 
- âœ… æ‰€æœ‰æ•°æ®ä»…ä¿å­˜åœ¨æœ¬åœ°
- âœ… å¯ä»¥éšæ—¶å…³é—­æµè§ˆå™¨
- âš ï¸ è¯·å‹¿åœ¨å…¬å…±ç½‘ç»œä¸­è¿è¡Œ
- âš ï¸ æ³¨æ„ä¿æŠ¤æˆªå›¾å’Œ HTML æ–‡ä»¶ä¸­çš„æ•æ„Ÿä¿¡æ¯
